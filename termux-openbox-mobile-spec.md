# Termux Proot Mobile-Friendly Desktop Environment

Проект: готовое к использованию окружение рабочего стола для Arch Linux в Termux proot, оптимизированное под сенсорное управление на смартфоне.

## Концепция

- **WM:** Openbox — лёгкий, гибко настраиваемый
- **Панель:** вертикальная слева с крупными иконками (стиль Unity)
- **Лаунчер:** Rofi в полноэкранном режиме (launchpad-стиль)
- **Цель:** установка одним скриптом после развёртывания proot дистрибутива

## Компоненты

### Базовая система

| Компонент | Пакет | Назначение |
|-----------|-------|------------|
| X сервер | termux-x11 / VNC | вывод графики |
| Звук | pulseaudio | аудио (настроить сокет для proot) |
| D-Bus | dbus | межпроцессное взаимодействие |
| Polkit | polkit | привилегированные действия |

### Оконный менеджер и композитор

| Компонент | Пакет | Назначение |
|-----------|-------|------------|
| WM | openbox | управление окнами |
| Композитор | picom | тени, прозрачность, vsync |

### Панель и лаунчер

| Компонент | Пакет | Назначение |
|-----------|-------|------------|
| Панель | tint2 | вертикальная панель слева с крупными иконками |
| Лаунчер | rofi | полноэкранный лаунчер приложений |

#### Настройки tint2

- Вертикальная ориентация (panel_position = center left vertical)
- Крупные иконки (launcher_icon_size = 48-64)
- Только launcher + taskbar, без лишнего

#### Настройки rofi

- Полноэкранный режим (fullscreen: true)
- Крупный шрифт (font: "Sans 18" или больше)
- Grid-вид для drun

### Уведомления

| Компонент | Пакет | Назначение |
|-----------|-------|------------|
| Демон уведомлений | dunst | отображение нотификаций |

- Крупный шрифт
- Позиция top-right или top-center
- Достаточный размер для тача

### Файловый менеджер и терминал

| Компонент | Пакет | Назначение |
|-----------|-------|------------|
| Файловый менеджер | pcmanfm или thunar | работа с файлами |
| Терминал | xfce4-terminal | терминал с GUI |

### Внешний вид

| Компонент | Что настроить |
|-----------|---------------|
| GTK тема | gtk2 (gtkrc-2.0) + gtk3 (settings.ini) |
| Иконки | Papirus или аналог |
| Курсор | тема + увеличенный размер (32-48) |
| Шрифты | установка + fontconfig |
| Обои | feh или nitrogen + дефолтная картинка |

### Масштабирование интерфейса

Ключевой момент для читаемости на маленьком экране:

```bash
# ~/.Xresources
Xft.dpi: 192
Xcursor.size: 48
```

```bash
# Переменные окружения
export GDK_SCALE=2
export GDK_DPI_SCALE=0.5
export QT_SCALE_FACTOR=2
```

### Системные утилиты

| Компонент | Пакет | Назначение |
|-----------|-------|------------|
| Сеть | network-manager-applet | управление сетью (если применимо) |
| Скриншоты | scrot или maim | снимки экрана |
| Буфер обмена | parcellite или clipmenu | менеджер clipboard |

### Специфика для телефона

| Компонент | Пакет | Назначение |
|-----------|-------|------------|
| Экранная клавиатура | onboard | ввод без физической клавиатуры |
| Жесты | touchegg | жесты (если поддерживается) |

### Системные настройки

- **Автостарт:** ~/.config/openbox/autostart
- **Локаль:** en_US.UTF-8 или ru_RU.UTF-8
- **XDG директории:** xdg-user-dirs для ~/Documents, ~/Downloads и т.д.
- **MIME ассоциации:** xdg-mime defaults

## Структура проекта

```
termux-openbox-mobile/
├── install.sh                  # Главный установочный скрипт
├── packages.txt                # Список пакетов для pacman
├── README.md                   # Документация
│
├── configs/
│   ├── openbox/
│   │   ├── rc.xml              # Конфигурация WM
│   │   ├── menu.xml            # Меню правой кнопки
│   │   └── autostart           # Автозапуск
│   │
│   ├── tint2/
│   │   └── tint2rc             # Конфигурация панели
│   │
│   ├── rofi/
│   │   ├── config.rasi         # Основной конфиг
│   │   └── theme.rasi          # Тема fullscreen
│   │
│   ├── dunst/
│   │   └── dunstrc             # Настройки уведомлений
│   │
│   ├── picom/
│   │   └── picom.conf          # Настройки композитора
│   │
│   ├── gtk-2.0/
│   │   └── gtkrc-2.0           # Тема GTK2
│   │
│   ├── gtk-3.0/
│   │   └── settings.ini        # Тема GTK3
│   │
│   ├── fontconfig/
│   │   └── fonts.conf          # Настройки шрифтов
│   │
│   ├── onboard/                # Настройки экранной клавиатуры
│   │
│   └── Xresources              # DPI, курсор, шрифты
│
├── scripts/
│   ├── install-packages.sh     # Установка пакетов
│   ├── deploy-configs.sh       # Раскладка конфигов
│   ├── setup-env.sh            # Переменные окружения
│   └── post-install.sh         # Финальные настройки
│
└── assets/
    └── wallpaper.png           # Дефолтные обои
```

## Логика install.sh

```bash
#!/bin/bash
set -e

SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"

echo "=== Termux Openbox Mobile Setup ==="

# 1. Обновление системы
pacman -Syu --noconfirm

# 2. Установка пакетов
source "$SCRIPT_DIR/scripts/install-packages.sh"

# 3. Раскладка конфигов
source "$SCRIPT_DIR/scripts/deploy-configs.sh"

# 4. Настройка окружения
source "$SCRIPT_DIR/scripts/setup-env.sh"

# 5. Финальные шаги
source "$SCRIPT_DIR/scripts/post-install.sh"

echo "=== Установка завершена ==="
echo "Запустите startx или подключитесь через VNC/Termux-X11"
```

## Список пакетов (packages.txt)

```
# Базовые
xorg-server
xorg-xinit
dbus

# WM и композитор
openbox
picom

# Панель и лаунчер
tint2
rofi

# Уведомления
dunst
libnotify

# Приложения
pcmanfm
xfce4-terminal

# Внешний вид
papirus-icon-theme
ttf-dejavu
ttf-liberation

# Утилиты
feh
scrot
parcellite
xdg-user-dirs

# Экранная клавиатура
onboard

# Звук (опционально)
pulseaudio
pavucontrol
```

## Заметки по реализации

1. **Termux-X11 vs VNC:** Termux-X11 даёт лучшую производительность, VNC — универсальность. Скрипт должен поддерживать оба варианта.

2. **PulseAudio в proot:** Требуется настройка для проброса звука из proot в Termux. Добавить инструкции или автоматизировать.

3. **Шрифты:** Убедиться, что fontconfig настроен на хороший рендеринг (hinting, antialiasing).

4. **Тестирование:** Проверить на разных разрешениях экрана (1080p, 1440p, разные DPI).

5. **Документация:** README с инструкциями по установке Termux, proot-distro, и запуску скрипта.

## TODO

- [ ] Создать все конфиги
- [ ] Написать скрипты установки
- [ ] Подобрать/создать обои
- [ ] Протестировать на реальном устройстве
- [ ] Залить на GitHub
- [ ] Написать README для пользователей
